#!/usr/bin/env bash

PID=$(hyprctl clients | rg -A 8 'workspace: 8' | rg pid | cut -d ' ' -f 2)
CURRENTWORKSPACE=$(hyprctl activeworkspace | rg workspace | cut -d ' ' -f 3)
WINDOW=$(hyprctl activeworkspace | rg 'windows:'| cut -d ' ' -f 2)

if [[ $WINDOW = 1 && $CURRENTWORKSPACE != 8 ]]; then
	hyprctl dispatch movetoworkspace "$CURRENTWORKSPACE",pid:"$PID"
	if [[ $CURRENTWORKSPACE -lt 8 ]]; then
		hyprctl dispatch swapwindow r
	elif [[ $CURRENTWORKSPACE -gt 8 ]]; then
		hyprctl dispatch swapwindow l
	fi
	echo "$PID" > ~/.config/hypr/scripts/PID8
elif [[ $WINDOW = 2 && $CURRENTWORKSPACE != 8 ]]; then
	ID=$(cat ~/.config/hypr/scripts/PID8)
	hyprctl dispatch movetoworkspacesilent 8,pid:"$ID"
	rm ~/.config/hypr/scripts/PID8
fi
